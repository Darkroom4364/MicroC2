<!DOCTYPE html>
<html>
<head>
    <title>MicroC2 - Payload Generator</title>
    <link rel="stylesheet" href="/home/css/styles.css">
    <style>
        /* Build Log Styles */
        .log-container {
            margin-top: 20px;
            border: 1px solid #444;
            border-radius: 4px;
            overflow: hidden;
            background-color: #1a1a1a;
        }
        
        .log-header {
            display: flex;
            justify-content: space-between;
            padding: 8px 12px;
            background-color: #333;
            border-bottom: 1px solid #444;
        }
        
        .log-header span {
            font-weight: bold;
            color: #ddd;
        }
        
        .clear-logs-btn {
            background: none;
            border: none;
            color: #aaa;
            cursor: pointer;
            font-size: 12px;
        }
        
        .clear-logs-btn:hover {
            color: #fff;
        }
        
        #build-log-display {
            height: 250px;
            overflow-y: auto;
            padding: 10px;
            font-family: monospace;
            font-size: 12px;
            color: #ddd;
            background-color: #111;
        }
        
        .log-entry {
            margin-bottom: 4px;
            padding: 2px 0;
            border-bottom: 1px solid #2a2a2a;
            word-break: break-word;
        }
        
        .log-entry:last-child {
            border-bottom: none;
        }
        
        .log-timestamp {
            color: #888;
            margin-right: 8px;
            font-size: 11px;
        }
        
        .log-level-INFO {
            color: #6bf;
        }
        
        .log-level-WARNING {
            color: #fd8;
        }
        
        .log-level-ERROR {
            color: #f66;
        }
        
        .log-message {
            margin-left: 8px;
            color: #ccc;
        }
        
        .log-message-payload {
            color: #6d6;
        }
    </style>
</head>
<body>
    <div class="havoc-container">
        <div class="sidebar">
            <div class="nav-header">MICROC2 CONSOLE</div>
            <div class="nav-item" onclick="window.location.href='/home/index.html'">Mission Control</div>
            <div class="nav-item" onclick="window.location.href='/home/listeners.html'">Listeners</div>
            <div class="nav-item active">Payload</div>
            <div class="nav-item" onclick="window.location.href='/home/file_drop.html'">File Drop</div>
            <div class="nav-item" onclick="window.location.href='/home/server_terminal.html'">Server Terminal</div>
        </div>

        <div class="content">
            <div class="top-panel">
                <div class="config-panel">
                    <h2>Payload Generator</h2>
                    <form id="payloadForm" class="config-form">
                        <div class="form-section">
                            <h3>Agent Configuration</h3>
                            <div class="form-group">
                                <label for="agentType">Agent Type</label>
                                <select id="agentType" name="agentType" required>
                                    <option value="debugAgent">Agent - Debug</option>
                                    <option value="agent">Agent</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="listener">Listener</label>
                                <select id="listener" name="listener" required>
                                    <option value="">Select a listener...</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="architecture">Architecture</label>
                                <select id="architecture" name="architecture" required>
                                    <option value="x64">x64</option>
                                    <option value="x86">x86</option>
                                    <option value="arm64">ARM64</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="format">Format</label>
                                <select id="format" name="format" required>
                                    <option value="windows_exe">Windows EXE</option>
                                    <option value="windows_dll">Windows DLL</option>
                                    <option value="windows_shellcode">Windows Shellcode</option>
                                    <option value="windows_service">Windows Service EXE</option>
                                    <option value="linux_elf">Linux ELF</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-section">
                            <h3>Advanced Options</h3>
                            <div class="form-group">
                                <label for="sleep">Sleep Interval (seconds)</label>
                                <input type="number" id="sleep" name="sleep" value="60">
                            </div>

                            <div class="form-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="indirectSyscall" name="indirectSyscall">
                                    Enable Indirect Syscalls
                                </label>
                            </div>

                            <div class="form-group">
                                <label for="sleepTechnique">Sleep Technique</label>
                                <select id="sleepTechnique" name="sleepTechnique">
                                    <option value="standard">Standard</option>
                                    <option value="winapi">WinAPI</option>
                                    <option value="modified">Modified/Obfuscated</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="dllSideloading" name="dllSideloading">
                                    Enable DLL Sideloading
                                </label>
                            </div>

                            <div id="sideloadingOptions" class="hidden">
                                <div class="form-group">
                                    <label for="sideloadDll">Sideload DLL Name</label>
                                    <input type="text" id="sideloadDll" name="sideloadDll">
                                </div>
                                <div class="form-group">
                                    <label for="exportName">Export Name</label>
                                    <input type="text" id="exportName" name="exportName">
                                </div>
                            </div>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="primary">Generate Payload</button>
                            <button type="reset" class="secondary">Reset</button>
                        </div>
                    </form>
                </div>
            </div>

            <div id="download-section" class="hidden">
                <div class="download-content">
                    <div class="file-info">
                        <span class="filename"></span>
                        <span class="filesize"></span>
                    </div>
                    <button class="download-button">Download Payload</button>
                </div>
            </div>

            <div class="build-logs-container">
                <div class="log-header">
                    <span>Build Logs</span>
                    <button class="clear-logs-btn" onclick="payloadManager.clearLogDisplay()">Clear</button>
                </div>
                <div id="build-log-display"></div>
            </div>

            <div class="build-logs-controls">
                <button id="autoScrollLogsBtn" onclick="payloadManager.toggleAutoScroll()">Auto-scroll: On</button>
            </div>
        </div>
    </div>

    <!-- Load scripts at the end of body -->
    <script src="/home/js/common.js"></script>
    <script src="/home/js/payload.js"></script>
</body>
</html>