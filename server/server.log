2025/04/17 12:17:03 [STARTUP] Starting server with http-polling protocol...
2025/04/17 12:17:03 [CONFIG] Upload directory: uploads
2025/04/17 12:17:03 [CONFIG] Static directory: static
2025/04/17 12:17:03 [CONFIG] File Drop directory: static/file_drop
2025/04/17 12:17:03 [CONFIG] Payloads directory: static/payloads
2025/04/17 12:17:03 [NETWORK] Port: 8080
2025/04/17 12:17:03 [STARTUP] Server initializing with http-polling protocol...
2025/04/17 12:17:03 [CONFIG] Upload directory: uploads
2025/04/17 12:17:03 [CONFIG] Static directory: static
2025/04/17 12:17:03 [CONFIG] File Drop directory: static/file_drop
2025/04/17 12:17:03 [NETWORK] Port: 8080
2025/04/17 12:17:36 [INFO] Listener configuration validated successfully: {ID:c756362b-ef2e-440b-b9c5-ae19f55f2560 Name:test-listener Protocol:http BindHost:0.0.0.0 Port:8443 URIs:[] Headers:map[X-MicroC2:1.0.0] UserAgent:Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 HostRotation:round-robin Hosts:[127.0.0.1] Proxy:<nil> TLSConfig:<nil>}
2025/04/17 12:17:36 [INFO] Started listener test-listener on 0.0.0.0:8443
2025/04/17 12:17:39 [INFO] Stopped listener test-listener
2025/04/17 12:17:41 [INFO] Started listener test-listener on 0.0.0.0:8443
2025/04/17 12:17:58 [INFO] Generating payload with config: {AgentType:debugAgent ListenerID:c756362b-ef2e-440b-b9c5-ae19f55f2560 Architecture:x64 Format:linux_elf Sleep:60 IndirectSyscall:false SleepTechnique:standard DllSideloading:false SideloadDll: ExportName:}
2025/04/17 12:17:58 [INFO] Using listener: test-listener (http) at 0.0.0.0:8443
2025/04/17 12:17:58 [INFO] Generated payload ID: 250620fd-0d57-4c93-83e3-039a1e12f822
2025/04/17 12:17:58 [INFO] Build type: debug
2025/04/17 12:17:58 [INFO] Created output directory: static/payloads/debug/250620fd-0d57-4c93-83e3-039a1e12f822
2025/04/17 12:17:58 [INFO] Created agent config file: static/payloads/debug/250620fd-0d57-4c93-83e3-039a1e12f822/config.json
2025/04/17 12:17:58 [INFO] Using build target: x86_64-unknown-linux-gnu
2025/04/17 12:17:58 [INFO] Using build script: ../agent/build.sh
2025/04/17 12:17:58 [INFO] Command: /bin/bash ../agent/build.sh --target x86_64-unknown-linux-gnu --output static/payloads/debug/250620fd-0d57-4c93-83e3-039a1e12f822 --build-type debug --format linux_elf
2025/04/17 12:17:58 [INFO] Working directory: ../agent
2025/04/17 12:17:58 [INFO] Environment variables set: TARGET=x86_64-unknown-linux-gnu, OUTPUT_DIR=static/payloads/debug/250620fd-0d57-4c93-83e3-039a1e12f822, BUILD_TYPE=debug, LISTENER_HOST=0.0.0.0, LISTENER_PORT=8443, SLEEP_INTERVAL=60
2025/04/17 12:17:58 [INFO] Starting build process...
2025/04/17 12:18:00 [INFO] Build output: MicroC2 Agent Builder
2025/04/17 12:18:00 [INFO] Build output: =============================
2025/04/17 12:18:00 [INFO] Build output: Configuration:
2025/04/17 12:18:00 [INFO] Build output:   Target:       x86_64-unknown-linux-gnu
2025/04/17 12:18:00 [INFO] Build output:   Output Dir:   /home/darkroom/coding/MicroC2/agent/static/payloads/debug/250620fd-0d57-4c93-83e3-039a1e12f822
2025/04/17 12:18:00 [INFO] Build output:   Build Type:   debug
2025/04/17 12:18:00 [INFO] Build output:   C2 Server:    172.28.249.104:8080
2025/04/17 12:18:00 [INFO] Build output:   Sleep:        60 seconds
2025/04/17 12:18:00 [INFO] Build output:   Jitter:       2 seconds
2025/04/17 12:18:00 [INFO] Build output:   Format:       linux_elf
2025/04/17 12:18:00 [INFO] Build output: Checking dependencies...
2025/04/17 12:18:00 [INFO] Build output: Installing cross...
2025/04/17 12:18:00 [INFO] Build output:     Updating crates.io index
2025/04/17 12:18:00 [INFO] Build output:      Ignored package `cross v0.2.5` is already installed, use --force to override
2025/04/17 12:18:00 [INFO] Build output: Building agent...
2025/04/17 12:18:00 [INFO] Build output: Created configuration in /home/darkroom/coding/MicroC2/agent/static/payloads/debug/250620fd-0d57-4c93-83e3-039a1e12f822/config.json
2025/04/17 12:18:00 [INFO] Build output: Building for x86_64-unknown-linux-gnu...
2025/04/17 12:18:00 [INFO] Build output: warning: unused import: `Body`
2025/04/17 12:18:00 [INFO] Build output:  --> src/file_handling/download.rs:2:21
2025/04/17 12:18:00 [INFO] Build output:   |
2025/04/17 12:18:00 [INFO] Build output: 2 | use hyper::{Client, Body};
2025/04/17 12:18:00 [INFO] Build output:   |                     ^^^^
2025/04/17 12:18:00 [INFO] Build output:   |
2025/04/17 12:18:00 [INFO] Build output:   = note: `#[warn(unused_imports)]` on by default
2025/04/17 12:18:00 [INFO] Build output: warning: unused import: `bytes::Bytes`
2025/04/17 12:18:00 [INFO] Build output:  --> src/file_handling/download.rs:3:5
2025/04/17 12:18:00 [INFO] Build output:   |
2025/04/17 12:18:00 [INFO] Build output: 3 | use bytes::Bytes;
2025/04/17 12:18:00 [INFO] Build output:   |     ^^^^^^^^^^^^
2025/04/17 12:18:00 [INFO] Build output: warning: unused import: `bytes::Bytes`
2025/04/17 12:18:00 [INFO] Build output:  --> src/file_handling/upload.rs:6:5
2025/04/17 12:18:00 [INFO] Build output:   |
2025/04/17 12:18:00 [INFO] Build output: 6 | use bytes::Bytes;
2025/04/17 12:18:00 [INFO] Build output:   |     ^^^^^^^^^^^^
2025/04/17 12:18:00 [INFO] Build output: warning: unused import: `std::env`
2025/04/17 12:18:00 [INFO] Build output:  --> src/commands/command_shell.rs:3:5
2025/04/17 12:18:00 [INFO] Build output:   |
2025/04/17 12:18:00 [INFO] Build output: 3 | use std::env;
2025/04/17 12:18:00 [INFO] Build output:   |     ^^^^^^^^
2025/04/17 12:18:00 [INFO] Build output: warning: unused import: `Value`
2025/04/17 12:18:00 [INFO] Build output:  --> src/commands/command_shell.rs:6:24
2025/04/17 12:18:00 [INFO] Build output:   |
2025/04/17 12:18:00 [INFO] Build output: 6 | use serde_json::{json, Value};
2025/04/17 12:18:00 [INFO] Build output:   |                        ^^^^^
2025/04/17 12:18:00 [INFO] Build output: warning: function `download_file` is never used
2025/04/17 12:18:00 [INFO] Build output:  --> src/file_handling/download.rs:5:14
2025/04/17 12:18:00 [INFO] Build output:   |
2025/04/17 12:18:00 [INFO] Build output: 5 | pub async fn download_file(url: &str) -> Result<Vec<u8>, Box<dyn Error>> {
2025/04/17 12:18:00 [INFO] Build output:   |              ^^^^^^^^^^^^^
2025/04/17 12:18:00 [INFO] Build output:   |
2025/04/17 12:18:00 [INFO] Build output:   = note: `#[warn(dead_code)]` on by default
2025/04/17 12:18:00 [INFO] Build output: warning: function `upload_file` is never used
2025/04/17 12:18:00 [INFO] Build output:  --> src/file_handling/upload.rs:8:14
2025/04/17 12:18:00 [INFO] Build output:   |
2025/04/17 12:18:00 [INFO] Build output: 8 | pub async fn upload_file(url: &str, filepath: &str) -> Result<(), Box<dyn Error>> {
2025/04/17 12:18:00 [INFO] Build output:   |              ^^^^^^^^^^^
2025/04/17 12:18:00 [INFO] Build output: warning: function `execute_and_capture` is never used
2025/04/17 12:18:00 [INFO] Build output:   --> src/commands/command_shell.rs:26:10
2025/04/17 12:18:00 [INFO] Build output:    |
2025/04/17 12:18:00 [INFO] Build output: 26 | async fn execute_and_capture(cmd: &str, args: &[&str]) -> io::Result<String> {
2025/04/17 12:18:00 [INFO] Build output:    |          ^^^^^^^^^^^^^^^^^^^
2025/04/17 12:18:00 [INFO] Build output: warning: function `display_tree` is never used
2025/04/17 12:18:00 [INFO] Build output:   --> src/commands/command_shell.rs:38:4
2025/04/17 12:18:00 [INFO] Build output:    |
2025/04/17 12:18:00 [INFO] Build output: 38 | fn display_tree(path: &Path, prefix: &str, is_last: bool) -> io::Result<()> {
2025/04/17 12:18:00 [INFO] Build output:    |    ^^^^^^^^^^^^
2025/04/17 12:18:00 [INFO] Build output: warning: function `stdin_ready` is never used
2025/04/17 12:18:00 [INFO] Build output:   --> src/commands/command_shell.rs:81:4
2025/04/17 12:18:00 [INFO] Build output:    |
2025/04/17 12:18:00 [INFO] Build output: 81 | fn stdin_ready() -> io::Result<bool> {
2025/04/17 12:18:00 [INFO] Build output:    |    ^^^^^^^^^^^
2025/04/17 12:18:00 [INFO] Build output: warning: function `get_command` is never used
2025/04/17 12:18:00 [INFO] Build output:    --> src/commands/command_shell.rs:123:10
2025/04/17 12:18:00 [INFO] Build output:     |
2025/04/17 12:18:00 [INFO] Build output: 123 | async fn get_command(server_addr: &str) -> io::Result<Option<String>> {
2025/04/17 12:18:00 [INFO] Build output:     |          ^^^^^^^^^^^
2025/04/17 12:18:00 [INFO] Build output: warning: multiple fields are never read
2025/04/17 12:18:00 [INFO] Build output:   --> src/config.rs:43:9
2025/04/17 12:18:00 [INFO] Build output:    |
2025/04/17 12:18:00 [INFO] Build output: 42 | pub struct ServerConfig {
2025/04/17 12:18:00 [INFO] Build output:    |            ------------ fields in this struct
2025/04/17 12:18:00 [INFO] Build output: 43 |     pub server_url: String,
2025/04/17 12:18:00 [INFO] Build output:    |         ^^^^^^^^^^
2025/04/17 12:18:00 [INFO] Build output: 44 |     pub sleep_time: u64,
2025/04/17 12:18:00 [INFO] Build output:    |         ^^^^^^^^^^
2025/04/17 12:18:00 [INFO] Build output: 45 |     pub jitter: u64,
2025/04/17 12:18:00 [INFO] Build output:    |         ^^^^^^
2025/04/17 12:18:00 [INFO] Build output: 46 |     pub uuid: String,
2025/04/17 12:18:00 [INFO] Build output:    |         ^^^^
2025/04/17 12:18:00 [INFO] Build output: 47 |     pub registered: bool,
2025/04/17 12:18:00 [INFO] Build output:    |         ^^^^^^^^^^
2025/04/17 12:18:00 [INFO] Build output: 48 |     pub agent_type: String,
2025/04/17 12:18:00 [INFO] Build output:    |         ^^^^^^^^^^
2025/04/17 12:18:00 [INFO] Build output: 49 |     pub system_info: String,
2025/04/17 12:18:00 [INFO] Build output:    |         ^^^^^^^^^^^
2025/04/17 12:18:00 [INFO] Build output: 50 |     pub hostname: String,
2025/04/17 12:18:00 [INFO] Build output:    |         ^^^^^^^^
2025/04/17 12:18:00 [INFO] Build output: 51 |     pub upload_dir: String,
2025/04/17 12:18:00 [INFO] Build output:    |         ^^^^^^^^^^
2025/04/17 12:18:00 [INFO] Build output: warning: associated items `new`, `register_url`, `get_task_url`, `submit_result_url`, and `upload_path` are never used
2025/04/17 12:18:00 [INFO] Build output:   --> src/config.rs:71:12
2025/04/17 12:18:00 [INFO] Build output:    |
2025/04/17 12:18:00 [INFO] Build output: 70 | impl ServerConfig {
2025/04/17 12:18:00 [INFO] Build output:    | ----------------- associated items in this implementation
2025/04/17 12:18:00 [INFO] Build output: 71 |     pub fn new() -> Self {
2025/04/17 12:18:00 [INFO] Build output:    |            ^^^
2025/04/17 12:18:00 [INFO] Build output: ...
2025/04/17 12:18:00 [INFO] Build output: 75 |     pub fn register_url(&self) -> String {
2025/04/17 12:18:00 [INFO] Build output:    |            ^^^^^^^^^^^^
2025/04/17 12:18:00 [INFO] Build output: ...
2025/04/17 12:18:00 [INFO] Build output: 79 |     pub fn get_task_url(&self) -> String {
2025/04/17 12:18:00 [INFO] Build output:    |            ^^^^^^^^^^^^
2025/04/17 12:18:00 [INFO] Build output: ...
2025/04/17 12:18:00 [INFO] Build output: 83 |     pub fn submit_result_url(&self) -> String {
2025/04/17 12:18:00 [INFO] Build output:    |            ^^^^^^^^^^^^^^^^^
2025/04/17 12:18:00 [INFO] Build output: ...
2025/04/17 12:18:00 [INFO] Build output: 87 |     pub fn upload_path(&self) -> String {
2025/04/17 12:18:00 [INFO] Build output:    |            ^^^^^^^^^^^
2025/04/17 12:18:00 [INFO] Build output: warning: `agent` (bin "agent") generated 13 warnings (run `cargo fix --bin "agent"` to apply 5 suggestions)
2025/04/17 12:18:00 [INFO] Build output:     Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.10s
2025/04/17 12:18:00 [INFO] Build output: Build complete in target/x86_64-unknown-linux-gnu/debug
2025/04/17 12:18:00 [INFO] Build output: Copying agent binary to output directory
2025/04/17 12:18:00 [INFO] Build output: Final output directory contents:
2025/04/17 12:18:00 [INFO] Build output: total 104548
2025/04/17 12:18:00 [INFO] Build output: drwxr-xr-x 2 darkroom darkroom     4096 Apr 17 12:17 .
2025/04/17 12:18:00 [INFO] Build output: drwxr-xr-x 3 darkroom darkroom     4096 Apr 17 12:17 ..
2025/04/17 12:18:00 [INFO] Build output: -rwxr-xr-x 1 darkroom darkroom 53521360 Apr 17 12:17 20250417121759_agent
2025/04/17 12:18:00 [INFO] Build output: -rwxr-xr-x 1 darkroom darkroom 53521360 Apr 17 12:17 agent
2025/04/17 12:18:00 [INFO] Build output: -rw-r--r-- 1 darkroom darkroom       87 Apr 17 12:17 config.json
2025/04/17 12:18:00 [INFO] Build output: Build process completed
2025/04/17 12:18:00 [INFO] Payload filename: agent
2025/04/17 12:18:00 [INFO] Checking for payload at: static/payloads/debug/250620fd-0d57-4c93-83e3-039a1e12f822/agent
2025/04/17 12:18:00 [ERROR] Payload not found at expected location static/payloads/debug/250620fd-0d57-4c93-83e3-039a1e12f822/agent: stat static/payloads/debug/250620fd-0d57-4c93-83e3-039a1e12f822/agent: no such file or directory
2025/04/17 12:18:00 [INFO] Output directory static/payloads/debug/250620fd-0d57-4c93-83e3-039a1e12f822 contents:
2025/04/17 12:18:00 [INFO] - config.json
2025/04/17 12:19:14 [INFO] Generating payload with config: {AgentType:debugAgent ListenerID:c756362b-ef2e-440b-b9c5-ae19f55f2560 Architecture:x64 Format:linux_elf Sleep:60 IndirectSyscall:false SleepTechnique:standard DllSideloading:false SideloadDll: ExportName:}
2025/04/17 12:19:14 [INFO] Using listener: test-listener (http) at 0.0.0.0:8443
2025/04/17 12:19:14 [INFO] Generated payload ID: 6ed91e48-9e25-429d-b61e-f9b0ed13ff73
2025/04/17 12:19:14 [INFO] Build type: debug
2025/04/17 12:19:14 [INFO] Created output directory: static/payloads/debug/6ed91e48-9e25-429d-b61e-f9b0ed13ff73
2025/04/17 12:19:14 [INFO] Created agent config file: static/payloads/debug/6ed91e48-9e25-429d-b61e-f9b0ed13ff73/config.json
2025/04/17 12:19:14 [INFO] Using build target: x86_64-unknown-linux-gnu
2025/04/17 12:19:14 [INFO] Using build script: ../agent/build.sh
2025/04/17 12:19:14 [INFO] Command: /bin/bash ../agent/build.sh --target x86_64-unknown-linux-gnu --output static/payloads/debug/6ed91e48-9e25-429d-b61e-f9b0ed13ff73 --build-type debug --format linux_elf
2025/04/17 12:19:14 [INFO] Working directory: ../agent
2025/04/17 12:19:14 [INFO] Environment variables set: TARGET=x86_64-unknown-linux-gnu, OUTPUT_DIR=static/payloads/debug/6ed91e48-9e25-429d-b61e-f9b0ed13ff73, BUILD_TYPE=debug, LISTENER_HOST=0.0.0.0, LISTENER_PORT=8443, SLEEP_INTERVAL=60
2025/04/17 12:19:14 [INFO] Starting build process...
2025/04/17 12:19:15 [INFO] Build output: MicroC2 Agent Builder
2025/04/17 12:19:15 [INFO] Build output: =============================
2025/04/17 12:19:15 [INFO] Build output: Configuration:
2025/04/17 12:19:15 [INFO] Build output:   Target:       x86_64-unknown-linux-gnu
2025/04/17 12:19:15 [INFO] Build output:   Output Dir:   /home/darkroom/coding/MicroC2/agent/static/payloads/debug/6ed91e48-9e25-429d-b61e-f9b0ed13ff73
2025/04/17 12:19:15 [INFO] Build output:   Build Type:   debug
2025/04/17 12:19:15 [INFO] Build output:   C2 Server:    172.28.249.104:8080
2025/04/17 12:19:15 [INFO] Build output:   Sleep:        60 seconds
2025/04/17 12:19:15 [INFO] Build output:   Jitter:       2 seconds
2025/04/17 12:19:15 [INFO] Build output:   Format:       linux_elf
2025/04/17 12:19:15 [INFO] Build output: Checking dependencies...
2025/04/17 12:19:15 [INFO] Build output: Installing cross...
2025/04/17 12:19:15 [INFO] Build output:     Updating crates.io index
2025/04/17 12:19:15 [INFO] Build output:      Ignored package `cross v0.2.5` is already installed, use --force to override
2025/04/17 12:19:15 [INFO] Build output: Building agent...
2025/04/17 12:19:15 [INFO] Build output: Created configuration in /home/darkroom/coding/MicroC2/agent/static/payloads/debug/6ed91e48-9e25-429d-b61e-f9b0ed13ff73/config.json
2025/04/17 12:19:15 [INFO] Build output: Building for x86_64-unknown-linux-gnu...
2025/04/17 12:19:15 [INFO] Build output: warning: unused import: `Body`
2025/04/17 12:19:15 [INFO] Build output:  --> src/file_handling/download.rs:2:21
2025/04/17 12:19:15 [INFO] Build output:   |
2025/04/17 12:19:15 [INFO] Build output: 2 | use hyper::{Client, Body};
2025/04/17 12:19:15 [INFO] Build output:   |                     ^^^^
2025/04/17 12:19:15 [INFO] Build output:   |
2025/04/17 12:19:15 [INFO] Build output:   = note: `#[warn(unused_imports)]` on by default
2025/04/17 12:19:15 [INFO] Build output: warning: unused import: `bytes::Bytes`
2025/04/17 12:19:15 [INFO] Build output:  --> src/file_handling/download.rs:3:5
2025/04/17 12:19:15 [INFO] Build output:   |
2025/04/17 12:19:15 [INFO] Build output: 3 | use bytes::Bytes;
2025/04/17 12:19:15 [INFO] Build output:   |     ^^^^^^^^^^^^
2025/04/17 12:19:15 [INFO] Build output: warning: unused import: `bytes::Bytes`
2025/04/17 12:19:15 [INFO] Build output:  --> src/file_handling/upload.rs:6:5
2025/04/17 12:19:15 [INFO] Build output:   |
2025/04/17 12:19:15 [INFO] Build output: 6 | use bytes::Bytes;
2025/04/17 12:19:15 [INFO] Build output:   |     ^^^^^^^^^^^^
2025/04/17 12:19:15 [INFO] Build output: warning: unused import: `std::env`
2025/04/17 12:19:15 [INFO] Build output:  --> src/commands/command_shell.rs:3:5
2025/04/17 12:19:15 [INFO] Build output:   |
2025/04/17 12:19:15 [INFO] Build output: 3 | use std::env;
2025/04/17 12:19:15 [INFO] Build output:   |     ^^^^^^^^
2025/04/17 12:19:15 [INFO] Build output: warning: unused import: `Value`
2025/04/17 12:19:15 [INFO] Build output:  --> src/commands/command_shell.rs:6:24
2025/04/17 12:19:15 [INFO] Build output:   |
2025/04/17 12:19:15 [INFO] Build output: 6 | use serde_json::{json, Value};
2025/04/17 12:19:15 [INFO] Build output:   |                        ^^^^^
2025/04/17 12:19:15 [INFO] Build output: warning: function `download_file` is never used
2025/04/17 12:19:15 [INFO] Build output:  --> src/file_handling/download.rs:5:14
2025/04/17 12:19:15 [INFO] Build output:   |
2025/04/17 12:19:15 [INFO] Build output: 5 | pub async fn download_file(url: &str) -> Result<Vec<u8>, Box<dyn Error>> {
2025/04/17 12:19:15 [INFO] Build output:   |              ^^^^^^^^^^^^^
2025/04/17 12:19:15 [INFO] Build output:   |
2025/04/17 12:19:15 [INFO] Build output:   = note: `#[warn(dead_code)]` on by default
2025/04/17 12:19:15 [INFO] Build output: warning: function `upload_file` is never used
2025/04/17 12:19:15 [INFO] Build output:  --> src/file_handling/upload.rs:8:14
2025/04/17 12:19:15 [INFO] Build output:   |
2025/04/17 12:19:15 [INFO] Build output: 8 | pub async fn upload_file(url: &str, filepath: &str) -> Result<(), Box<dyn Error>> {
2025/04/17 12:19:15 [INFO] Build output:   |              ^^^^^^^^^^^
2025/04/17 12:19:15 [INFO] Build output: warning: function `execute_and_capture` is never used
2025/04/17 12:19:15 [INFO] Build output:   --> src/commands/command_shell.rs:26:10
2025/04/17 12:19:15 [INFO] Build output:    |
2025/04/17 12:19:15 [INFO] Build output: 26 | async fn execute_and_capture(cmd: &str, args: &[&str]) -> io::Result<String> {
2025/04/17 12:19:15 [INFO] Build output:    |          ^^^^^^^^^^^^^^^^^^^
2025/04/17 12:19:15 [INFO] Build output: warning: function `display_tree` is never used
2025/04/17 12:19:15 [INFO] Build output:   --> src/commands/command_shell.rs:38:4
2025/04/17 12:19:15 [INFO] Build output:    |
2025/04/17 12:19:15 [INFO] Build output: 38 | fn display_tree(path: &Path, prefix: &str, is_last: bool) -> io::Result<()> {
2025/04/17 12:19:15 [INFO] Build output:    |    ^^^^^^^^^^^^
2025/04/17 12:19:15 [INFO] Build output: warning: function `stdin_ready` is never used
2025/04/17 12:19:15 [INFO] Build output:   --> src/commands/command_shell.rs:81:4
2025/04/17 12:19:15 [INFO] Build output:    |
2025/04/17 12:19:15 [INFO] Build output: 81 | fn stdin_ready() -> io::Result<bool> {
2025/04/17 12:19:15 [INFO] Build output:    |    ^^^^^^^^^^^
2025/04/17 12:19:15 [INFO] Build output: warning: function `get_command` is never used
2025/04/17 12:19:15 [INFO] Build output:    --> src/commands/command_shell.rs:123:10
2025/04/17 12:19:15 [INFO] Build output:     |
2025/04/17 12:19:15 [INFO] Build output: 123 | async fn get_command(server_addr: &str) -> io::Result<Option<String>> {
2025/04/17 12:19:15 [INFO] Build output:     |          ^^^^^^^^^^^
2025/04/17 12:19:15 [INFO] Build output: warning: multiple fields are never read
2025/04/17 12:19:15 [INFO] Build output:   --> src/config.rs:43:9
2025/04/17 12:19:15 [INFO] Build output:    |
2025/04/17 12:19:15 [INFO] Build output: 42 | pub struct ServerConfig {
2025/04/17 12:19:15 [INFO] Build output:    |            ------------ fields in this struct
2025/04/17 12:19:15 [INFO] Build output: 43 |     pub server_url: String,
2025/04/17 12:19:15 [INFO] Build output:    |         ^^^^^^^^^^
2025/04/17 12:19:15 [INFO] Build output: 44 |     pub sleep_time: u64,
2025/04/17 12:19:15 [INFO] Build output:    |         ^^^^^^^^^^
2025/04/17 12:19:15 [INFO] Build output: 45 |     pub jitter: u64,
2025/04/17 12:19:15 [INFO] Build output:    |         ^^^^^^
2025/04/17 12:19:15 [INFO] Build output: 46 |     pub uuid: String,
2025/04/17 12:19:15 [INFO] Build output:    |         ^^^^
2025/04/17 12:19:15 [INFO] Build output: 47 |     pub registered: bool,
2025/04/17 12:19:15 [INFO] Build output:    |         ^^^^^^^^^^
2025/04/17 12:19:15 [INFO] Build output: 48 |     pub agent_type: String,
2025/04/17 12:19:15 [INFO] Build output:    |         ^^^^^^^^^^
2025/04/17 12:19:15 [INFO] Build output: 49 |     pub system_info: String,
2025/04/17 12:19:15 [INFO] Build output:    |         ^^^^^^^^^^^
2025/04/17 12:19:15 [INFO] Build output: 50 |     pub hostname: String,
2025/04/17 12:19:15 [INFO] Build output:    |         ^^^^^^^^
2025/04/17 12:19:15 [INFO] Build output: 51 |     pub upload_dir: String,
2025/04/17 12:19:15 [INFO] Build output:    |         ^^^^^^^^^^
2025/04/17 12:19:15 [INFO] Build output: warning: associated items `new`, `register_url`, `get_task_url`, `submit_result_url`, and `upload_path` are never used
2025/04/17 12:19:15 [INFO] Build output:   --> src/config.rs:71:12
2025/04/17 12:19:15 [INFO] Build output:    |
2025/04/17 12:19:15 [INFO] Build output: 70 | impl ServerConfig {
2025/04/17 12:19:15 [INFO] Build output:    | ----------------- associated items in this implementation
2025/04/17 12:19:15 [INFO] Build output: 71 |     pub fn new() -> Self {
2025/04/17 12:19:15 [INFO] Build output:    |            ^^^
2025/04/17 12:19:15 [INFO] Build output: ...
2025/04/17 12:19:15 [INFO] Build output: 75 |     pub fn register_url(&self) -> String {
2025/04/17 12:19:15 [INFO] Build output:    |            ^^^^^^^^^^^^
2025/04/17 12:19:15 [INFO] Build output: ...
2025/04/17 12:19:15 [INFO] Build output: 79 |     pub fn get_task_url(&self) -> String {
2025/04/17 12:19:15 [INFO] Build output:    |            ^^^^^^^^^^^^
2025/04/17 12:19:15 [INFO] Build output: ...
2025/04/17 12:19:15 [INFO] Build output: 83 |     pub fn submit_result_url(&self) -> String {
2025/04/17 12:19:15 [INFO] Build output:    |            ^^^^^^^^^^^^^^^^^
2025/04/17 12:19:15 [INFO] Build output: ...
2025/04/17 12:19:15 [INFO] Build output: 87 |     pub fn upload_path(&self) -> String {
2025/04/17 12:19:15 [INFO] Build output:    |            ^^^^^^^^^^^
2025/04/17 12:19:15 [INFO] Build output: warning: `agent` (bin "agent") generated 13 warnings (run `cargo fix --bin "agent"` to apply 5 suggestions)
2025/04/17 12:19:15 [INFO] Build output:     Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.12s
2025/04/17 12:19:15 [INFO] Build output: Build complete in target/x86_64-unknown-linux-gnu/debug
2025/04/17 12:19:15 [INFO] Build output: Copying agent binary to output directory
2025/04/17 12:19:15 [INFO] Build output: Final output directory contents:
2025/04/17 12:19:15 [INFO] Build output: total 104548
2025/04/17 12:19:15 [INFO] Build output: drwxr-xr-x 2 darkroom darkroom     4096 Apr 17 12:19 .
2025/04/17 12:19:15 [INFO] Build output: drwxr-xr-x 4 darkroom darkroom     4096 Apr 17 12:19 ..
2025/04/17 12:19:15 [INFO] Build output: -rwxr-xr-x 1 darkroom darkroom 53521360 Apr 17 12:19 20250417121915_agent
2025/04/17 12:19:15 [INFO] Build output: -rwxr-xr-x 1 darkroom darkroom 53521360 Apr 17 12:19 agent
2025/04/17 12:19:15 [INFO] Build output: -rw-r--r-- 1 darkroom darkroom       87 Apr 17 12:19 config.json
2025/04/17 12:19:15 [INFO] Build output: Build process completed
2025/04/17 12:19:15 [INFO] Payload filename: agent
2025/04/17 12:19:15 [INFO] Checking for payload at: static/payloads/debug/6ed91e48-9e25-429d-b61e-f9b0ed13ff73/agent
2025/04/17 12:19:15 [ERROR] Payload not found at expected location static/payloads/debug/6ed91e48-9e25-429d-b61e-f9b0ed13ff73/agent: stat static/payloads/debug/6ed91e48-9e25-429d-b61e-f9b0ed13ff73/agent: no such file or directory
2025/04/17 12:19:15 [INFO] Output directory static/payloads/debug/6ed91e48-9e25-429d-b61e-f9b0ed13ff73 contents:
2025/04/17 12:19:15 [INFO] - config.json
2025/04/17 12:21:45 [INFO] Generating payload with config: {AgentType:debugAgent ListenerID:c756362b-ef2e-440b-b9c5-ae19f55f2560 Architecture:x64 Format:linux_elf Sleep:60 IndirectSyscall:false SleepTechnique:standard DllSideloading:false SideloadDll: ExportName:}
2025/04/17 12:21:45 [INFO] Using listener: test-listener (http) at 0.0.0.0:8443
2025/04/17 12:21:45 [INFO] Generated payload ID: daa5326d-a9ce-46c2-8ad2-b8ab351e2afa
2025/04/17 12:21:45 [INFO] Build type: debug
2025/04/17 12:21:45 [INFO] Created output directory: static/payloads/debug/daa5326d-a9ce-46c2-8ad2-b8ab351e2afa
2025/04/17 12:21:45 [INFO] Created agent config file: static/payloads/debug/daa5326d-a9ce-46c2-8ad2-b8ab351e2afa/config.json
2025/04/17 12:21:45 [INFO] Using build target: x86_64-unknown-linux-gnu
2025/04/17 12:21:45 [INFO] Using build script: ../agent/build.sh
2025/04/17 12:21:45 [INFO] Command: /bin/bash ../agent/build.sh --target x86_64-unknown-linux-gnu --output static/payloads/debug/daa5326d-a9ce-46c2-8ad2-b8ab351e2afa --build-type debug --format linux_elf
2025/04/17 12:21:45 [INFO] Working directory: ../agent
2025/04/17 12:21:45 [INFO] Environment variables set: TARGET=x86_64-unknown-linux-gnu, OUTPUT_DIR=static/payloads/debug/daa5326d-a9ce-46c2-8ad2-b8ab351e2afa, BUILD_TYPE=debug, LISTENER_HOST=0.0.0.0, LISTENER_PORT=8443, SLEEP_INTERVAL=60
2025/04/17 12:21:45 [INFO] Starting build process...
2025/04/17 12:21:46 [INFO] Build output: MicroC2 Agent Builder
2025/04/17 12:21:46 [INFO] Build output: =============================
2025/04/17 12:21:46 [INFO] Build output: Configuration:
2025/04/17 12:21:46 [INFO] Build output:   Target:       x86_64-unknown-linux-gnu
2025/04/17 12:21:46 [INFO] Build output:   Output Dir:   /home/darkroom/coding/MicroC2/agent/static/payloads/debug/daa5326d-a9ce-46c2-8ad2-b8ab351e2afa
2025/04/17 12:21:46 [INFO] Build output:   Build Type:   debug
2025/04/17 12:21:46 [INFO] Build output:   C2 Server:    172.28.249.104:8080
2025/04/17 12:21:46 [INFO] Build output:   Sleep:        60 seconds
2025/04/17 12:21:46 [INFO] Build output:   Jitter:       2 seconds
2025/04/17 12:21:46 [INFO] Build output:   Format:       linux_elf
2025/04/17 12:21:46 [INFO] Build output: Checking dependencies...
2025/04/17 12:21:46 [INFO] Build output: Installing cross...
2025/04/17 12:21:46 [INFO] Build output:     Updating crates.io index
2025/04/17 12:21:46 [INFO] Build output:      Ignored package `cross v0.2.5` is already installed, use --force to override
2025/04/17 12:21:46 [INFO] Build output: Building agent...
2025/04/17 12:21:46 [INFO] Build output: Created configuration in /home/darkroom/coding/MicroC2/agent/static/payloads/debug/daa5326d-a9ce-46c2-8ad2-b8ab351e2afa/config.json
2025/04/17 12:21:46 [INFO] Build output: Building for x86_64-unknown-linux-gnu...
2025/04/17 12:21:46 [INFO] Build output: warning: unused import: `Body`
2025/04/17 12:21:46 [INFO] Build output:  --> src/file_handling/download.rs:2:21
2025/04/17 12:21:46 [INFO] Build output:   |
2025/04/17 12:21:46 [INFO] Build output: 2 | use hyper::{Client, Body};
2025/04/17 12:21:46 [INFO] Build output:   |                     ^^^^
2025/04/17 12:21:46 [INFO] Build output:   |
2025/04/17 12:21:46 [INFO] Build output:   = note: `#[warn(unused_imports)]` on by default
2025/04/17 12:21:46 [INFO] Build output: warning: unused import: `bytes::Bytes`
2025/04/17 12:21:46 [INFO] Build output:  --> src/file_handling/download.rs:3:5
2025/04/17 12:21:46 [INFO] Build output:   |
2025/04/17 12:21:46 [INFO] Build output: 3 | use bytes::Bytes;
2025/04/17 12:21:46 [INFO] Build output:   |     ^^^^^^^^^^^^
2025/04/17 12:21:46 [INFO] Build output: warning: unused import: `bytes::Bytes`
2025/04/17 12:21:46 [INFO] Build output:  --> src/file_handling/upload.rs:6:5
2025/04/17 12:21:46 [INFO] Build output:   |
2025/04/17 12:21:46 [INFO] Build output: 6 | use bytes::Bytes;
2025/04/17 12:21:46 [INFO] Build output:   |     ^^^^^^^^^^^^
2025/04/17 12:21:46 [INFO] Build output: warning: unused import: `std::env`
2025/04/17 12:21:46 [INFO] Build output:  --> src/commands/command_shell.rs:3:5
2025/04/17 12:21:46 [INFO] Build output:   |
2025/04/17 12:21:46 [INFO] Build output: 3 | use std::env;
2025/04/17 12:21:46 [INFO] Build output:   |     ^^^^^^^^
2025/04/17 12:21:46 [INFO] Build output: warning: unused import: `Value`
2025/04/17 12:21:46 [INFO] Build output:  --> src/commands/command_shell.rs:6:24
2025/04/17 12:21:46 [INFO] Build output:   |
2025/04/17 12:21:46 [INFO] Build output: 6 | use serde_json::{json, Value};
2025/04/17 12:21:46 [INFO] Build output:   |                        ^^^^^
2025/04/17 12:21:46 [INFO] Build output: warning: function `download_file` is never used
2025/04/17 12:21:46 [INFO] Build output:  --> src/file_handling/download.rs:5:14
2025/04/17 12:21:46 [INFO] Build output:   |
2025/04/17 12:21:46 [INFO] Build output: 5 | pub async fn download_file(url: &str) -> Result<Vec<u8>, Box<dyn Error>> {
2025/04/17 12:21:46 [INFO] Build output:   |              ^^^^^^^^^^^^^
2025/04/17 12:21:46 [INFO] Build output:   |
2025/04/17 12:21:46 [INFO] Build output:   = note: `#[warn(dead_code)]` on by default
2025/04/17 12:21:46 [INFO] Build output: warning: function `upload_file` is never used
2025/04/17 12:21:46 [INFO] Build output:  --> src/file_handling/upload.rs:8:14
2025/04/17 12:21:46 [INFO] Build output:   |
2025/04/17 12:21:46 [INFO] Build output: 8 | pub async fn upload_file(url: &str, filepath: &str) -> Result<(), Box<dyn Error>> {
2025/04/17 12:21:46 [INFO] Build output:   |              ^^^^^^^^^^^
2025/04/17 12:21:46 [INFO] Build output: warning: function `execute_and_capture` is never used
2025/04/17 12:21:46 [INFO] Build output:   --> src/commands/command_shell.rs:26:10
2025/04/17 12:21:46 [INFO] Build output:    |
2025/04/17 12:21:46 [INFO] Build output: 26 | async fn execute_and_capture(cmd: &str, args: &[&str]) -> io::Result<String> {
2025/04/17 12:21:46 [INFO] Build output:    |          ^^^^^^^^^^^^^^^^^^^
2025/04/17 12:21:46 [INFO] Build output: warning: function `display_tree` is never used
2025/04/17 12:21:46 [INFO] Build output:   --> src/commands/command_shell.rs:38:4
2025/04/17 12:21:46 [INFO] Build output:    |
2025/04/17 12:21:46 [INFO] Build output: 38 | fn display_tree(path: &Path, prefix: &str, is_last: bool) -> io::Result<()> {
2025/04/17 12:21:46 [INFO] Build output:    |    ^^^^^^^^^^^^
2025/04/17 12:21:46 [INFO] Build output: warning: function `stdin_ready` is never used
2025/04/17 12:21:46 [INFO] Build output:   --> src/commands/command_shell.rs:81:4
2025/04/17 12:21:46 [INFO] Build output:    |
2025/04/17 12:21:46 [INFO] Build output: 81 | fn stdin_ready() -> io::Result<bool> {
2025/04/17 12:21:46 [INFO] Build output:    |    ^^^^^^^^^^^
2025/04/17 12:21:46 [INFO] Build output: warning: function `get_command` is never used
2025/04/17 12:21:46 [INFO] Build output:    --> src/commands/command_shell.rs:123:10
2025/04/17 12:21:46 [INFO] Build output:     |
2025/04/17 12:21:46 [INFO] Build output: 123 | async fn get_command(server_addr: &str) -> io::Result<Option<String>> {
2025/04/17 12:21:46 [INFO] Build output:     |          ^^^^^^^^^^^
2025/04/17 12:21:46 [INFO] Build output: warning: multiple fields are never read
2025/04/17 12:21:46 [INFO] Build output:   --> src/config.rs:43:9
2025/04/17 12:21:46 [INFO] Build output:    |
2025/04/17 12:21:46 [INFO] Build output: 42 | pub struct ServerConfig {
2025/04/17 12:21:46 [INFO] Build output:    |            ------------ fields in this struct
2025/04/17 12:21:46 [INFO] Build output: 43 |     pub server_url: String,
2025/04/17 12:21:46 [INFO] Build output:    |         ^^^^^^^^^^
2025/04/17 12:21:46 [INFO] Build output: 44 |     pub sleep_time: u64,
2025/04/17 12:21:46 [INFO] Build output:    |         ^^^^^^^^^^
2025/04/17 12:21:46 [INFO] Build output: 45 |     pub jitter: u64,
2025/04/17 12:21:46 [INFO] Build output:    |         ^^^^^^
2025/04/17 12:21:46 [INFO] Build output: 46 |     pub uuid: String,
2025/04/17 12:21:46 [INFO] Build output:    |         ^^^^
2025/04/17 12:21:46 [INFO] Build output: 47 |     pub registered: bool,
2025/04/17 12:21:46 [INFO] Build output:    |         ^^^^^^^^^^
2025/04/17 12:21:46 [INFO] Build output: 48 |     pub agent_type: String,
2025/04/17 12:21:46 [INFO] Build output:    |         ^^^^^^^^^^
2025/04/17 12:21:46 [INFO] Build output: 49 |     pub system_info: String,
2025/04/17 12:21:46 [INFO] Build output:    |         ^^^^^^^^^^^
2025/04/17 12:21:46 [INFO] Build output: 50 |     pub hostname: String,
2025/04/17 12:21:46 [INFO] Build output:    |         ^^^^^^^^
2025/04/17 12:21:46 [INFO] Build output: 51 |     pub upload_dir: String,
2025/04/17 12:21:46 [INFO] Build output:    |         ^^^^^^^^^^
2025/04/17 12:21:46 [INFO] Build output: warning: associated items `new`, `register_url`, `get_task_url`, `submit_result_url`, and `upload_path` are never used
2025/04/17 12:21:46 [INFO] Build output:   --> src/config.rs:71:12
2025/04/17 12:21:46 [INFO] Build output:    |
2025/04/17 12:21:46 [INFO] Build output: 70 | impl ServerConfig {
2025/04/17 12:21:46 [INFO] Build output:    | ----------------- associated items in this implementation
2025/04/17 12:21:46 [INFO] Build output: 71 |     pub fn new() -> Self {
2025/04/17 12:21:46 [INFO] Build output:    |            ^^^
2025/04/17 12:21:46 [INFO] Build output: ...
2025/04/17 12:21:46 [INFO] Build output: 75 |     pub fn register_url(&self) -> String {
2025/04/17 12:21:46 [INFO] Build output:    |            ^^^^^^^^^^^^
2025/04/17 12:21:46 [INFO] Build output: ...
2025/04/17 12:21:46 [INFO] Build output: 79 |     pub fn get_task_url(&self) -> String {
2025/04/17 12:21:46 [INFO] Build output:    |            ^^^^^^^^^^^^
2025/04/17 12:21:46 [INFO] Build output: ...
2025/04/17 12:21:46 [INFO] Build output: 83 |     pub fn submit_result_url(&self) -> String {
2025/04/17 12:21:46 [INFO] Build output:    |            ^^^^^^^^^^^^^^^^^
2025/04/17 12:21:46 [INFO] Build output: ...
2025/04/17 12:21:46 [INFO] Build output: 87 |     pub fn upload_path(&self) -> String {
2025/04/17 12:21:46 [INFO] Build output:    |            ^^^^^^^^^^^
2025/04/17 12:21:46 [INFO] Build output: warning: `agent` (bin "agent") generated 13 warnings (run `cargo fix --bin "agent"` to apply 5 suggestions)
2025/04/17 12:21:46 [INFO] Build output:     Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.08s
2025/04/17 12:21:46 [INFO] Build output: Build complete in target/x86_64-unknown-linux-gnu/debug
2025/04/17 12:21:46 [INFO] Build output: Copying agent binary to output directory
2025/04/17 12:21:46 [INFO] Build output: Final output directory contents:
2025/04/17 12:21:46 [INFO] Build output: total 104548
2025/04/17 12:21:46 [INFO] Build output: drwxr-xr-x 2 darkroom darkroom     4096 Apr 17 12:21 .
2025/04/17 12:21:46 [INFO] Build output: drwxr-xr-x 3 darkroom darkroom     4096 Apr 17 12:21 ..
2025/04/17 12:21:46 [INFO] Build output: -rwxr-xr-x 1 darkroom darkroom 53521360 Apr 17 12:21 20250417122146_agent
2025/04/17 12:21:46 [INFO] Build output: -rwxr-xr-x 1 darkroom darkroom 53521360 Apr 17 12:21 agent
2025/04/17 12:21:46 [INFO] Build output: -rw-r--r-- 1 darkroom darkroom       87 Apr 17 12:21 config.json
2025/04/17 12:21:46 [INFO] Build output: Build process completed
2025/04/17 12:21:46 [INFO] Payload filename: agent
2025/04/17 12:21:46 [INFO] Checking for payload at: static/payloads/debug/daa5326d-a9ce-46c2-8ad2-b8ab351e2afa/agent
2025/04/17 12:21:46 [ERROR] Payload not found at expected location static/payloads/debug/daa5326d-a9ce-46c2-8ad2-b8ab351e2afa/agent: stat static/payloads/debug/daa5326d-a9ce-46c2-8ad2-b8ab351e2afa/agent: no such file or directory
2025/04/17 12:21:46 [INFO] Output directory static/payloads/debug/daa5326d-a9ce-46c2-8ad2-b8ab351e2afa contents:
2025/04/17 12:21:46 [INFO] - config.json
2025/04/17 12:52:32 [STARTUP] Starting server with http-polling protocol...
2025/04/17 12:52:32 [CONFIG] Upload directory: uploads
2025/04/17 12:52:32 [CONFIG] Static directory: static
2025/04/17 12:52:32 [CONFIG] File Drop directory: static/file_drop
2025/04/17 12:52:32 [CONFIG] Payloads directory: static/payloads
2025/04/17 12:52:32 [NETWORK] Port: 8080
2025/04/17 12:52:32 [STARTUP] Server initializing with http-polling protocol...
2025/04/17 12:52:32 [CONFIG] Upload directory: uploads
2025/04/17 12:52:32 [CONFIG] Static directory: static
2025/04/17 12:52:32 [CONFIG] File Drop directory: static/file_drop
2025/04/17 12:52:32 [NETWORK] Port: 8080
2025/04/17 12:53:24 [INFO] Listener configuration validated successfully: {ID:0cba931d-b7d2-4f29-83be-a5d46949c6f5 Name:test-listener Protocol:http BindHost:0.0.0.0 Port:8443 URIs:[] Headers:map[X-MicroC2:1.0.0] UserAgent:Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 HostRotation:round-robin Hosts:[192.168.0.1] Proxy:<nil> TLSConfig:<nil>}
2025/04/17 12:53:24 [INFO] Started listener test-listener on 0.0.0.0:8443
2025/04/17 12:54:04 [INFO] Generating payload with config: {AgentType:debugAgent ListenerID:0cba931d-b7d2-4f29-83be-a5d46949c6f5 Architecture:x64 Format:linux_elf Sleep:60 IndirectSyscall:false SleepTechnique:standard DllSideloading:false SideloadDll: ExportName:}
2025/04/17 12:54:04 [INFO] Using listener: test-listener (http) at 0.0.0.0:8443
2025/04/17 12:54:04 [INFO] Generated payload ID: d47e6b06-1858-465e-941f-a212a30b54ad
2025/04/17 12:54:04 [INFO] Build type: debug
2025/04/17 12:54:04 [INFO] Created output directory: static/payloads/debug/d47e6b06-1858-465e-941f-a212a30b54ad
2025/04/17 12:54:04 [INFO] Created agent config file: static/payloads/debug/d47e6b06-1858-465e-941f-a212a30b54ad/config.json
2025/04/17 12:54:04 [INFO] Using build target: x86_64-unknown-linux-gnu
2025/04/17 12:54:04 [INFO] Using build script: ../agent/build.sh
2025/04/17 12:54:04 [INFO] Command: /bin/bash ../agent/build.sh --target x86_64-unknown-linux-gnu --output static/payloads/debug/d47e6b06-1858-465e-941f-a212a30b54ad --build-type debug --format linux_elf
2025/04/17 12:54:04 [INFO] Working directory: ../agent
2025/04/17 12:54:04 [INFO] Environment variables set: TARGET=x86_64-unknown-linux-gnu, OUTPUT_DIR=static/payloads/debug/d47e6b06-1858-465e-941f-a212a30b54ad, BUILD_TYPE=debug, LISTENER_HOST=0.0.0.0, LISTENER_PORT=8443, SLEEP_INTERVAL=60
2025/04/17 12:54:04 [INFO] Starting build process...
2025/04/17 12:54:06 [INFO] Build output: MicroC2 Agent Builder
2025/04/17 12:54:06 [INFO] Build output: =============================
2025/04/17 12:54:06 [INFO] Build output: Using specified output directory: static/payloads/debug/d47e6b06-1858-465e-941f-a212a30b54ad
2025/04/17 12:54:06 [INFO] Build output: Configuration:
2025/04/17 12:54:06 [INFO] Build output:   Target:       x86_64-unknown-linux-gnu
2025/04/17 12:54:06 [INFO] Build output:   Output Dir:   /home/darkroom/coding/MicroC2/agent/static/payloads/debug/d47e6b06-1858-465e-941f-a212a30b54ad
2025/04/17 12:54:06 [INFO] Build output:   Build Type:   debug
2025/04/17 12:54:06 [INFO] Build output:   C2 Server:    172.28.249.104:8080
2025/04/17 12:54:06 [INFO] Build output:   Sleep:        60 seconds
2025/04/17 12:54:06 [INFO] Build output:   Jitter:       2 seconds
2025/04/17 12:54:06 [INFO] Build output:   Format:       linux_elf
2025/04/17 12:54:06 [INFO] Build output: Checking dependencies...
2025/04/17 12:54:06 [INFO] Build output: Installing cross...
2025/04/17 12:54:06 [INFO] Build output:     Updating crates.io index
2025/04/17 12:54:06 [INFO] Build output:      Ignored package `cross v0.2.5` is already installed, use --force to override
2025/04/17 12:54:06 [INFO] Build output: Building agent...
2025/04/17 12:54:06 [INFO] Build output: Created configuration in /home/darkroom/coding/MicroC2/agent/static/payloads/debug/d47e6b06-1858-465e-941f-a212a30b54ad/config.json
2025/04/17 12:54:06 [INFO] Build output: Building for x86_64-unknown-linux-gnu...
2025/04/17 12:54:06 [INFO] Build output: warning: unused import: `Body`
2025/04/17 12:54:06 [INFO] Build output:  --> src/file_handling/download.rs:2:21
2025/04/17 12:54:06 [INFO] Build output:   |
2025/04/17 12:54:06 [INFO] Build output: 2 | use hyper::{Client, Body};
2025/04/17 12:54:06 [INFO] Build output:   |                     ^^^^
2025/04/17 12:54:06 [INFO] Build output:   |
2025/04/17 12:54:06 [INFO] Build output:   = note: `#[warn(unused_imports)]` on by default
2025/04/17 12:54:06 [INFO] Build output: warning: unused import: `bytes::Bytes`
2025/04/17 12:54:06 [INFO] Build output:  --> src/file_handling/download.rs:3:5
2025/04/17 12:54:06 [INFO] Build output:   |
2025/04/17 12:54:06 [INFO] Build output: 3 | use bytes::Bytes;
2025/04/17 12:54:06 [INFO] Build output:   |     ^^^^^^^^^^^^
2025/04/17 12:54:06 [INFO] Build output: warning: unused import: `bytes::Bytes`
2025/04/17 12:54:06 [INFO] Build output:  --> src/file_handling/upload.rs:6:5
2025/04/17 12:54:06 [INFO] Build output:   |
2025/04/17 12:54:06 [INFO] Build output: 6 | use bytes::Bytes;
2025/04/17 12:54:06 [INFO] Build output:   |     ^^^^^^^^^^^^
2025/04/17 12:54:06 [INFO] Build output: warning: unused import: `std::env`
2025/04/17 12:54:06 [INFO] Build output:  --> src/commands/command_shell.rs:3:5
2025/04/17 12:54:06 [INFO] Build output:   |
2025/04/17 12:54:06 [INFO] Build output: 3 | use std::env;
2025/04/17 12:54:06 [INFO] Build output:   |     ^^^^^^^^
2025/04/17 12:54:06 [INFO] Build output: warning: unused import: `Value`
2025/04/17 12:54:06 [INFO] Build output:  --> src/commands/command_shell.rs:6:24
2025/04/17 12:54:06 [INFO] Build output:   |
2025/04/17 12:54:06 [INFO] Build output: 6 | use serde_json::{json, Value};
2025/04/17 12:54:06 [INFO] Build output:   |                        ^^^^^
2025/04/17 12:54:06 [INFO] Build output: warning: function `download_file` is never used
2025/04/17 12:54:06 [INFO] Build output:  --> src/file_handling/download.rs:5:14
2025/04/17 12:54:06 [INFO] Build output:   |
2025/04/17 12:54:06 [INFO] Build output: 5 | pub async fn download_file(url: &str) -> Result<Vec<u8>, Box<dyn Error>> {
2025/04/17 12:54:06 [INFO] Build output:   |              ^^^^^^^^^^^^^
2025/04/17 12:54:06 [INFO] Build output:   |
2025/04/17 12:54:06 [INFO] Build output:   = note: `#[warn(dead_code)]` on by default
2025/04/17 12:54:06 [INFO] Build output: warning: function `upload_file` is never used
2025/04/17 12:54:06 [INFO] Build output:  --> src/file_handling/upload.rs:8:14
2025/04/17 12:54:06 [INFO] Build output:   |
2025/04/17 12:54:06 [INFO] Build output: 8 | pub async fn upload_file(url: &str, filepath: &str) -> Result<(), Box<dyn Error>> {
2025/04/17 12:54:06 [INFO] Build output:   |              ^^^^^^^^^^^
2025/04/17 12:54:06 [INFO] Build output: warning: function `execute_and_capture` is never used
2025/04/17 12:54:06 [INFO] Build output:   --> src/commands/command_shell.rs:26:10
2025/04/17 12:54:06 [INFO] Build output:    |
2025/04/17 12:54:06 [INFO] Build output: 26 | async fn execute_and_capture(cmd: &str, args: &[&str]) -> io::Result<String> {
2025/04/17 12:54:06 [INFO] Build output:    |          ^^^^^^^^^^^^^^^^^^^
2025/04/17 12:54:06 [INFO] Build output: warning: function `display_tree` is never used
2025/04/17 12:54:06 [INFO] Build output:   --> src/commands/command_shell.rs:38:4
2025/04/17 12:54:06 [INFO] Build output:    |
2025/04/17 12:54:06 [INFO] Build output: 38 | fn display_tree(path: &Path, prefix: &str, is_last: bool) -> io::Result<()> {
2025/04/17 12:54:06 [INFO] Build output:    |    ^^^^^^^^^^^^
2025/04/17 12:54:06 [INFO] Build output: warning: function `stdin_ready` is never used
2025/04/17 12:54:06 [INFO] Build output:   --> src/commands/command_shell.rs:81:4
2025/04/17 12:54:06 [INFO] Build output:    |
2025/04/17 12:54:06 [INFO] Build output: 81 | fn stdin_ready() -> io::Result<bool> {
2025/04/17 12:54:06 [INFO] Build output:    |    ^^^^^^^^^^^
2025/04/17 12:54:06 [INFO] Build output: warning: function `get_command` is never used
2025/04/17 12:54:06 [INFO] Build output:    --> src/commands/command_shell.rs:123:10
2025/04/17 12:54:06 [INFO] Build output:     |
2025/04/17 12:54:06 [INFO] Build output: 123 | async fn get_command(server_addr: &str) -> io::Result<Option<String>> {
2025/04/17 12:54:06 [INFO] Build output:     |          ^^^^^^^^^^^
2025/04/17 12:54:06 [INFO] Build output: warning: multiple fields are never read
2025/04/17 12:54:06 [INFO] Build output:   --> src/config.rs:43:9
2025/04/17 12:54:06 [INFO] Build output:    |
2025/04/17 12:54:06 [INFO] Build output: 42 | pub struct ServerConfig {
2025/04/17 12:54:06 [INFO] Build output:    |            ------------ fields in this struct
2025/04/17 12:54:06 [INFO] Build output: 43 |     pub server_url: String,
2025/04/17 12:54:06 [INFO] Build output:    |         ^^^^^^^^^^
2025/04/17 12:54:06 [INFO] Build output: 44 |     pub sleep_time: u64,
2025/04/17 12:54:06 [INFO] Build output:    |         ^^^^^^^^^^
2025/04/17 12:54:06 [INFO] Build output: 45 |     pub jitter: u64,
2025/04/17 12:54:06 [INFO] Build output:    |         ^^^^^^
2025/04/17 12:54:06 [INFO] Build output: 46 |     pub uuid: String,
2025/04/17 12:54:06 [INFO] Build output:    |         ^^^^
2025/04/17 12:54:06 [INFO] Build output: 47 |     pub registered: bool,
2025/04/17 12:54:06 [INFO] Build output:    |         ^^^^^^^^^^
2025/04/17 12:54:06 [INFO] Build output: 48 |     pub agent_type: String,
2025/04/17 12:54:06 [INFO] Build output:    |         ^^^^^^^^^^
2025/04/17 12:54:06 [INFO] Build output: 49 |     pub system_info: String,
2025/04/17 12:54:06 [INFO] Build output:    |         ^^^^^^^^^^^
2025/04/17 12:54:06 [INFO] Build output: 50 |     pub hostname: String,
2025/04/17 12:54:06 [INFO] Build output:    |         ^^^^^^^^
2025/04/17 12:54:06 [INFO] Build output: 51 |     pub upload_dir: String,
2025/04/17 12:54:06 [INFO] Build output:    |         ^^^^^^^^^^
2025/04/17 12:54:06 [INFO] Build output: warning: associated items `new`, `register_url`, `get_task_url`, `submit_result_url`, and `upload_path` are never used
2025/04/17 12:54:06 [INFO] Build output:   --> src/config.rs:71:12
2025/04/17 12:54:06 [INFO] Build output:    |
2025/04/17 12:54:06 [INFO] Build output: 70 | impl ServerConfig {
2025/04/17 12:54:06 [INFO] Build output:    | ----------------- associated items in this implementation
2025/04/17 12:54:06 [INFO] Build output: 71 |     pub fn new() -> Self {
2025/04/17 12:54:06 [INFO] Build output:    |            ^^^
2025/04/17 12:54:06 [INFO] Build output: ...
2025/04/17 12:54:06 [INFO] Build output: 75 |     pub fn register_url(&self) -> String {
2025/04/17 12:54:06 [INFO] Build output:    |            ^^^^^^^^^^^^
2025/04/17 12:54:06 [INFO] Build output: ...
2025/04/17 12:54:06 [INFO] Build output: 79 |     pub fn get_task_url(&self) -> String {
2025/04/17 12:54:06 [INFO] Build output:    |            ^^^^^^^^^^^^
2025/04/17 12:54:06 [INFO] Build output: ...
2025/04/17 12:54:06 [INFO] Build output: 83 |     pub fn submit_result_url(&self) -> String {
2025/04/17 12:54:06 [INFO] Build output:    |            ^^^^^^^^^^^^^^^^^
2025/04/17 12:54:06 [INFO] Build output: ...
2025/04/17 12:54:06 [INFO] Build output: 87 |     pub fn upload_path(&self) -> String {
2025/04/17 12:54:06 [INFO] Build output:    |            ^^^^^^^^^^^
2025/04/17 12:54:06 [INFO] Build output: warning: `agent` (bin "agent") generated 13 warnings (run `cargo fix --bin "agent"` to apply 5 suggestions)
2025/04/17 12:54:06 [INFO] Build output:     Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.39s
2025/04/17 12:54:06 [INFO] Build output: Build complete in target/x86_64-unknown-linux-gnu/debug
2025/04/17 12:54:06 [INFO] Build output: Copying agent binary to output directory: /home/darkroom/coding/MicroC2/agent/static/payloads/debug/d47e6b06-1858-465e-941f-a212a30b54ad/agent
2025/04/17 12:54:06 [INFO] Build output: Agent binary copied successfully to specified output location
2025/04/17 12:54:06 [INFO] Build output: Final output directory contents:
2025/04/17 12:54:06 [INFO] Build output: total 104548
2025/04/17 12:54:06 [INFO] Build output: drwxr-xr-x 2 darkroom darkroom     4096 Apr 17 12:54 .
2025/04/17 12:54:06 [INFO] Build output: drwxr-xr-x 3 darkroom darkroom     4096 Apr 17 12:54 ..
2025/04/17 12:54:06 [INFO] Build output: -rwxr-xr-x 1 darkroom darkroom 53521360 Apr 17 12:54 20250417125406_agent
2025/04/17 12:54:06 [INFO] Build output: -rwxr-xr-x 1 darkroom darkroom 53521360 Apr 17 12:54 agent
2025/04/17 12:54:06 [INFO] Build output: -rw-r--r-- 1 darkroom darkroom       87 Apr 17 12:54 config.json
2025/04/17 12:54:06 [INFO] Build output: Build process completed
2025/04/17 12:54:06 [INFO] Payload filename: agent
2025/04/17 12:54:06 [INFO] Checking for payload at: static/payloads/debug/d47e6b06-1858-465e-941f-a212a30b54ad/agent
2025/04/17 12:54:06 [ERROR] Payload not found at expected location static/payloads/debug/d47e6b06-1858-465e-941f-a212a30b54ad/agent: stat static/payloads/debug/d47e6b06-1858-465e-941f-a212a30b54ad/agent: no such file or directory
2025/04/17 12:54:06 [INFO] Output directory static/payloads/debug/d47e6b06-1858-465e-941f-a212a30b54ad contents:
2025/04/17 12:54:06 [INFO] - config.json
